function getContributions(t,o,r){var e={action:"update",range:paginationStep,limit:t.counter,lang:userLang,lasts:r};o({method:"POST",url:phpUrl,data:$.param(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(o){var e=o.success.datas;if(r!==!1){if(void 0!==e[0])for(var n in loop=e)t.items.unshift(loop[n])}else for(var n in loop=e)t.items.push(loop[n]);t.loaded=!0,t.result=null,t.formData.thisForm=!1}).error(function(){t.loaded=!1,t.items="error in fetching datas",t.result=null,t.formData.thisForm=!1})}tmdtApp.directive("scroller",function(){return{restrict:"A",scope:{loadingMethod:"&"},link:function(t,o){var r=o[0];r&&window.addEventListener("scroll",function(){var o=document.documentElement.scrollTop||document.body.scrollTop;document.body.scrollHeight===o+window.innerHeight&&(console.log("yiii"),t.$apply(t.loadingMethod))})}}}),tmdtApp.controller("writeController",["$scope","$http","ngTranslation","$timeout",function(t,o,r,e){document.getElementById("mdm").focus(),t.formData={action:"insert",resultStatus:!1},t.items=[],t.counter=0,t.loaded=!0,t.loadMore=function(){t.loaded=!1,getContributions(t,o,lasts=!1),t.counter+=paginationStep},t.loaded===!0&&t.loadMore();var n=function(){getContributions(t,o,lasts=3),e(n,3e3)}.bind(this);e(n,3e3),t.formData={action:"insert",resultStatus:null,lang:userLang},t.processForm=function(){t.formData.thisForm=!0,t.formData.mdm?o({method:"POST",url:phpUrl,data:$.param(t.formData),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(o){o.success?(t.formData.mdm=null,t.formData.resultStatus=!0,t.result=r.get(userLang).crowdwriting.success):(t.formData.resultStatus=!1,t.result=r.get(userLang).crowdwriting.error);var n=function(){t.formData.resultStatus=null,t.result="",t.formData.thisForm=!1,o.success&&(t.formData.mdm=null)}.bind(this);e(n,3e3)}).error(function(){t.formData.resultStatus=!1,t.result=r.get(userLang).crowdwriting.serverError}):(t.formData.resultStatus=!1,t.result=r.get(userLang).crowdwriting.emptyError,document.getElementById("mdm").focus())}}]);